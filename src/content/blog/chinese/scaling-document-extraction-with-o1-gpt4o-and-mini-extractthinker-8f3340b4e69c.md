---
title: "ä½¿ç”¨ O1ã€GPT4o å’Œ Mini | ExtractThinker æ‰©å±•æ–‡æ¡£æå–åŠŸèƒ½"
meta_title: "ä½¿ç”¨ O1ã€GPT4o å’Œ Mini | ExtractThinker æ‰©å±•æ–‡æ¡£æå–åŠŸèƒ½"
description: "æœ¬æ–‡ä»‹ç»äº†å¦‚ä½•é«˜æ•ˆä½¿ç”¨ExtractThinkerå¤„ç†å¤§è§„æ¨¡æ–‡æ¡£ï¼Œæ¶µç›–äº†ä¸åŒæ¨¡å‹çš„é€‰æ‹©ï¼ˆå¦‚GPT-4oã€o1ç­‰ï¼‰åŠå…¶åº”ç”¨åœºæ™¯ã€‚ExtractThinkerä½œä¸ºæ–‡æ¡£æ™ºèƒ½åº“ï¼Œç»“åˆäº†DocumentLoaderã€LLMå’ŒExtractorç­‰ç»„ä»¶ï¼Œå®ç°äº†å¯¹æ–‡æ¡£çš„åŠ è½½ã€æ‹†åˆ†ã€åˆ†ç±»å’Œæ•°æ®æå–ã€‚æ–‡ç« è¿˜æ¢è®¨äº†OCRæŠ€æœ¯åœ¨æ•°æ®æå–ä¸­çš„é‡è¦æ€§ä»¥åŠå¼‚æ­¥æ‰¹å¤„ç†åœ¨é«˜è´Ÿè½½æƒ…å†µä¸‹çš„åº”ç”¨ï¼Œæ—¨åœ¨æé«˜æ–‡æ¡£å¤„ç†çš„æ•ˆç‡å’Œå‡†ç¡®æ€§ã€‚"
date: 2024-11-25T15:00:22Z
image: "https://wsrv.nl/?url=https://cdn-images-1.readmedium.com/v2/resize:fit:800/1*vjrBW5a2WahkFj0XkpXhtw.png"
categories: ["Programming", "Technology", "Data Science"]
author: "Rifx.Online"
tags: ["ExtractThinker", "DocumentLoader", "LLM", "Extractor", "Contracts"]
draft: False

---





åœ¨æœ¬æ–‡ä¸­ï¼Œæˆ‘ä»¬å°†æ¢è®¨å¦‚ä½•é«˜æ•ˆåœ°ä½¿ç”¨ [ExtractThinker](https://github.com/enoch3712/ExtractThinker) æ¥å¤„ç†å¤§è§„æ¨¡æ–‡æ¡£ã€‚æˆ‘ä»¬å°†è®¨è®ºä½•æ—¶ä½¿ç”¨ä¸åŒçš„æ¨¡å‹ï¼Œå¦‚ O1ã€GPT4o åŠå…¶è¿·ä½ ç‰ˆæœ¬ï¼Œå¦‚ä½•å¤„ç† OCRï¼Œæå–å›¾è¡¨ï¼Œå¹¶ä½¿ç”¨å¼‚æ­¥æ‰¹å¤„ç†ç®¡ç†é‡è´Ÿè½½ã€‚

## ExtractThinker ä»‹ç»

æ˜¯ä¸€ä¸ªçµæ´»çš„æ–‡æ¡£æ™ºèƒ½åº“ï¼Œå¸®åŠ©æ‚¨ä»å„ç§æ–‡æ¡£ä¸­æå–å’Œåˆ†ç±»ç»“æ„åŒ–æ•°æ®ï¼Œç±»ä¼¼äºæ–‡æ¡£å¤„ç†å·¥ä½œæµçš„ ORMã€‚æ‚¨å¯ä»¥è¯´çš„ä¸€ä¸ªçŸ­è¯­æ˜¯ **â€œæ–‡æ¡£æ™ºèƒ½ç”¨äº LLMsâ€** æˆ– **â€œLangChain ç”¨äºæ™ºèƒ½æ–‡æ¡£å¤„ç†ã€‚â€** åŠ¨æœºæ˜¯åˆ›å»ºæ–‡æ¡£å¤„ç†æ‰€éœ€çš„ä¸“ä¸šåŠŸèƒ½ï¼Œä¾‹å¦‚ **æ‹†åˆ†** å¤§å‹æ–‡æ¡£å’Œ **é«˜çº§åˆ†ç±»**ã€‚

ä¸‹é¢çš„å›¾åƒæ˜ å°„äº†å°†è¦è®¨è®ºçš„æ‰€æœ‰å†…å®¹ï¼š

![](https://wsrv.nl/?url=https://cdn-images-1.readmedium.com/v2/resize:fit:800/1*k-5aAy6-hoSxLCtTwL9A8Q.png)

### DocumentLoader

DocumentLoader æ˜¯æ–‡æ¡£ä¸ LLM ä¹‹é—´çš„è¿æ¥ï¼Œé€šå¸¸åœ¨ SOTA OCR ä¸Šå®Œæˆã€‚æ”¯æŒå¤šç§æ–‡æ¡£åŠ è½½å™¨ï¼ŒåŒ…æ‹¬ Tesseract OCRã€Azure Form Recognizerã€AWS Textractã€Google Document AI ç­‰ã€‚

### LLM

å®ƒæ˜¯æ¨¡å‹çš„è£…é¥°å™¨ã€‚å®ƒå»ºç«‹åœ¨åƒ [LiteLLM](https://www.litellm.ai/) å’Œ [Instructor](https://github.com/instructor-ai/instructor) è¿™æ ·çš„å·¥å…·ä¹‹ä¸Šï¼Œä»¥ä¾¿äºæ— å…³çš„ä½¿ç”¨ã€‚å®ƒæ˜¯å›´ç»•æ–‡æ¡£æ™ºèƒ½çš„éœ€æ±‚è€Œè®¾è®¡çš„ã€‚

### åˆåŒ

ä¹Ÿå¯ä»¥æ˜¯ä¸€ä¸ªè£…é¥°å™¨ï¼Œä½†å±äº Pydanticã€‚å…¶ç›®çš„æ˜¯åŒ…æ‹¬è‡ªå®šä¹‰åŠŸèƒ½ï¼Œå¦‚éªŒè¯å™¨å’Œæç¤ºå·¥ç¨‹ï¼Œä»¥ä¾¿è‡ªåŠ¨æ³¨å…¥å’Œå¤„ç†ã€‚

### æå–å™¨

åè°ƒæ–‡æ¡£åŠ è½½å™¨ä¸LLMsä¹‹é—´çš„äº¤äº’ï¼Œä»¥æå–ç»“æ„åŒ–æ•°æ®ã€‚

### è¿‡ç¨‹

è¡¨ç¤ºæ–‡ä»¶ä¸­çš„æµã€‚åŸºäºä¸Šè¿°ç»„ä»¶æ„å»ºã€‚æ‚¨å¯ä»¥æ ¹æ®ç‰¹å®šç”¨ä¾‹é€‰æ‹© **DocumentLoaders** å’Œ **Extractors**ã€‚

è¿˜æœ‰å…¶ä»–è¾ƒå°çš„ç»„ä»¶ï¼Œå¦‚ **Splitters** å’Œ **Classifications**ï¼Œä½†æˆ‘ä»¬å°†ç»“åˆé€‚å½“çš„ç¤ºä¾‹æ¥æŸ¥çœ‹å®ƒä»¬ã€‚

## é€‰æ‹©åˆé€‚çš„æ¨¡å‹

é€‰æ‹©åˆé€‚çš„æ¨¡å‹å¯¹äºå¹³è¡¡æ€§èƒ½ã€å‡†ç¡®æ€§å’Œæˆæœ¬è‡³å…³é‡è¦ã€‚é¦–å…ˆï¼Œè®©æˆ‘ä»¬çœ‹çœ‹æˆæœ¬ï¼š 

![](https://wsrv.nl/?url=https://cdn-images-1.readmedium.com/v2/resize:fit:800/1*NLoXSsgU8TgumzynudILFA.png)

### GPT\-4o mini

**ä½¿ç”¨æ¡ˆä¾‹**ï¼šåŸºæœ¬æ–‡æœ¬æå–ä»»åŠ¡ï¼Œç±»ä¼¼äºOCRã€‚

éå¸¸é€‚åˆä»æ–‡æ¡£ä¸­æå–æ–‡æœ¬ï¼Œæ‚¨éœ€è¦å°†å›¾åƒæˆ–PDFè½¬æ¢ä¸ºæœºå™¨å¯è¯»æ–‡æœ¬ã€‚å…·æœ‰æˆæœ¬æ•ˆç›Šä¸”å¿«é€Ÿï¼Œéå¸¸é€‚åˆé«˜å®¹é‡å¤„ç†ã€‚

### GPT\-4o

**ä½¿ç”¨æ¡ˆä¾‹**ï¼šåˆ†ç±»å’Œæ‹†åˆ†ã€‚

GPT\-4o æ¨¡å‹è®©æ‚¨å¯¹æ–‡æ¡£çš„å†…å®¹å’Œç»“æ„æœ‰æ›´æ·±å…¥çš„ç†è§£ã€‚éå¸¸é€‚åˆå¯¹æ–‡æ¡£è¿›è¡Œåˆ†ç±»ï¼Œå°†åˆå¹¶çš„æ–‡æ¡£æ‹†åˆ†ä¸ºå•ç‹¬çš„éƒ¨åˆ†ï¼Œä»¥åŠæ‰§è¡Œå¤æ‚çš„åˆ†ç±»ä»»åŠ¡ã€‚

**ä½•æ—¶ä½¿ç”¨**ï¼š

* å°†æ–‡æ¡£åˆ†ç±»ä¸ºå‘ç¥¨ã€åˆåŒæˆ–æ”¶æ®ç­‰ç±»å‹ã€‚
* æ ¹æ®å†…å®¹å°†å¤šé¡µæ–‡æ¡£æ‹†åˆ†ä¸ºå•ç‹¬çš„éƒ¨åˆ†ã€‚
* éœ€è¦ç†è§£ä¸Šä¸‹æ–‡å’Œç»†å¾®å·®åˆ«çš„é«˜çº§åˆ†ç±»ã€‚

### o1 å’Œ o1\-mini æ¨¡å‹

**ä½¿ç”¨åœºæ™¯**ï¼šéœ€è¦ä»æ•°æ®ä¸­è¿›è¡Œæ¨ç†å’Œç”Ÿæˆç»“è®ºçš„é«˜çº§æå–ä»»åŠ¡ã€‚

**o1 å’Œ o1\-mini æ¨¡å‹** æ—¨åœ¨å¤„ç†å¤æ‚çš„æå–åœºæ™¯ï¼Œåœ¨è¿™äº›åœºæ™¯ä¸­ï¼Œæ¨¡å‹éœ€è¦è¿›è¡Œæ›´æ·±å…¥çš„åˆ†æå’Œæ¨ç†ã€‚ä¾‹å¦‚ï¼Œä»å›¾è¡¨ä¸­æå–æ•°æ®ï¼Œè§£é‡Šæ•°å€¼ï¼Œä»¥åŠæ ¹æ®æå–çš„åæ ‡è®¡ç®—èšåˆæŒ‡æ ‡ï¼Œå¦‚äººå‡ GDPã€‚

**ä½•æ—¶ä½¿ç”¨**ï¼š

* åŸºäºæå–çš„æ•°æ®è¿›è¡Œè®¡ç®—æˆ–ç”Ÿæˆæ´å¯Ÿã€‚

ä¸Šé¢çš„è¯¦ç»†æè¿°å¯ä»¥åœ¨ä¸‹é¢çš„å›¾åƒä¸­æ¦‚æ‹¬ï¼š

![](https://wsrv.nl/?url=https://cdn-images-1.readmedium.com/v2/resize:fit:800/1*P5Dijb-2wwHz8pzMsEs4iQ.png)

## åœ¨ ExtractThinker ä¸­ä½¿ç”¨ DocumentLoader

åœ¨ ExtractThinker ä¸­ï¼Œ**DocumentLoader** æ˜¯ä¸€ä¸ªå…³é”®ç»„ä»¶ï¼Œå®ƒ **è¿æ¥æ‚¨çš„æ–‡æ¡£å’Œ LLM**ã€‚å®ƒä½¿ç”¨æœ€å…ˆè¿›çš„ OCR æŠ€æœ¯æˆ–ç›´æ¥æ–‡æœ¬æå–å·¥å…·å¤„ç†æ¥è‡ªå„ç§æ–‡æ¡£æ ¼å¼çš„æ–‡æœ¬å’Œå¸ƒå±€ä¿¡æ¯çš„æå–ã€‚

### OCRä¸çº¯è§†è§‰

æ‚¨å¯ä»¥ä»…ä½¿ç”¨LLMså®Œç¾åœ°æå–æ•°æ®ï¼Œä½†é—®é¢˜æœ‰ä¸¤ä¸ªæ–¹é¢ï¼š**å¹»è§‰å’Œç²¾ç¡®æ€§ã€‚** å¦‚æœæ•°æ®ä¸å¤Ÿå¯è§æˆ–ä¸å¤Ÿæ¸…æ™°ï¼Œå°±å¯èƒ½å‘ç”Ÿå¹»è§‰ã€‚**OCRä¼šåœ¨æ•°æ®æ–¹é¢å‡†ç¡®æ»¡è¶³æ‚¨çš„éœ€æ±‚ï¼Œè€ŒLLMåˆ™ä¼šæä¾›ç»“æ„ã€‚** åœ¨æŸäº›æ–‡ä»¶ä¸­ï¼Œä¾‹å¦‚å¸¦æœ‰ç­¾åçš„æ–‡ä»¶ï¼Œç²¾ç¡®æ€§å°†æ˜¯ä¸€ä¸ªé—®é¢˜ï¼Œè€ŒOCRå¯ä»¥å¾ˆå¥½åœ°å¤„ç†è¿™äº›æƒ…å†µã€‚

å› æ­¤ï¼Œåœ¨ç”Ÿäº§æ¡ˆä¾‹ä¸­ï¼Œå°½é‡ä½¿ç”¨å¯ç”¨è§†è§‰çš„OCRã€‚**è¿™å°†æŠŠOCRæ–‡æœ¬å’Œå›¾åƒæ·»åŠ åˆ°LLMè¯·æ±‚ä¸­ã€‚**

![](https://wsrv.nl/?url=https://cdn-images-1.readmedium.com/v2/resize:fit:800/1*pPQXQILNrADbfYY8lbxskg.png)

### å¯ç”¨çš„ DocumentLoaders

ExtractThinker æä¾›äº†å‡ ç§ DocumentLoadersï¼ŒåŒ…æ‹¬ï¼š

* **DocumentLoaderTesseract**ï¼šä½¿ç”¨ Tesseract OCR ä»å›¾åƒæˆ–æ‰«æçš„ PDF ä¸­æå–æ–‡æœ¬ã€‚
* **DocumentLoaderPyPdf**ï¼šä½¿ç”¨ PyPDF ç›´æ¥ä» PDF ä¸­æå–æ–‡æœ¬ï¼Œé€‚ç”¨äºæ•°å­—ç”Ÿæˆçš„ PDFã€‚
* **DocumentLoaderAWSTextract**ï¼šä¸ AWS Textract é›†æˆï¼Œæä¾›é«˜çº§ OCR åŠŸèƒ½ã€‚
* **DocumentLoaderAzureForm**ï¼šåˆ©ç”¨ Azure Form Recognizer æå–ç»“æ„åŒ–æ•°æ®ã€‚
* **DocumentLoaderGoogleDocumentAI**ï¼šè¿æ¥åˆ° Google Document AI è¿›è¡Œ OCR å’Œæ•°æ®æå–ã€‚

å®ƒåŒ…å«ä¸¤ä¸ªä¸»è¦æ–¹æ³•ï¼Œ**load** åœ¨ **extract()** ä¸Šè°ƒç”¨ï¼Œ**load\_content\_list** åœ¨ **split()** ä¸­è°ƒç”¨ã€‚

**ä» DocumentLoader è·å–å†…å®¹**


```python
import os
from extract_thinker.document_loader import DocumentLoaderTesseract

## Set the path to your Tesseract executable
tesseract_path = os.getenv('TESSERACT_PATH')
if not tesseract_path:
    raise ValueError('TESSERACT_PATH environment variable is not set')

## Gets the content in JSON or just in text
content = loader.load(test_file_path)

## Gets a JSON with the content and images, per page
content = loader.load_content_list(test_file_path)
```

## æå–å™¨ï¼šæå–ç»“æ„åŒ–æ•°æ®å’Œå›¾è¡¨

**æå–å™¨**æ˜¯ExtractThinkerä¸­çš„æ ¸å¿ƒç»„ä»¶ï¼Œè´Ÿè´£åè°ƒæ‚¨çš„**æ–‡æ¡£åŠ è½½å™¨**å’Œ**LLM**ä¹‹é—´çš„äº¤äº’ï¼Œä»¥ä»æ–‡æ¡£ä¸­æå–ç»“æ„åŒ–æ•°æ®ã€‚å®ƒåˆ©ç”¨LLMçš„èƒ½åŠ›ï¼Œæ ¹æ®ç§°ä¸º**åˆåŒ**çš„é¢„å®šä¹‰æ•°æ®ç»“æ„æ¥è§£é‡Šå’Œç»„ç»‡æå–çš„æ–‡æœ¬ã€‚

### å®šä¹‰åˆåŒ

åˆåŒæ˜¯ Pydantic æ¨¡å‹ï¼Œå®šä¹‰äº†æ‚¨å¸Œæœ›ä»æ–‡æ¡£ä¸­æå–çš„æ•°æ®ç»“æ„ã€‚å®ƒä»¬åƒæ¶æ„ä¸€æ ·ï¼Œä¾›æå–å™¨å’Œ LLM ç”¨äºè§£æå’Œç»„ç»‡æå–çš„ä¿¡æ¯ã€‚

**ä¸ºå‘ç¥¨å®šä¹‰åˆåŒ**


```python
from extract_thinker import Contract
from pydantic import Field
from typing import List

class InvoiceLineItem(Contract):
    description: str = Field(description="æè¿°é¡¹ç›®")
    quantity: int = Field(description="é¡¹ç›®æ•°é‡")
    unit_price: float = Field(description="é¡¹ç›®å•ä»·")
    amount: float = Field(description="é¡¹ç›®æ€»é‡‘é¢")

class InvoiceContract(Contract):
    invoice_number: str = Field(description="å‘ç¥¨å·ç ")
    invoice_date: str = Field(description="å‘ç¥¨æ—¥æœŸ")
    total_amount: float = Field(description="å‘ç¥¨æ€»é‡‘é¢")
    line_items: List[InvoiceLineItem] = Field(description="å‘ç¥¨ä¸­é¡¹ç›®çš„åˆ—è¡¨")
```
è¯¥åˆåŒæŒ‡å®šæˆ‘ä»¬å¸Œæœ›æå–å‘ç¥¨å·ç ã€æ—¥æœŸã€æ€»é‡‘é¢å’Œæ¯ä¸ªé¡¹ç›®çš„è¯¦ç»†ä¿¡æ¯ã€‚

**ä»å‘ç¥¨ä¸­æå–æ•°æ®**


```python
import os
from extract_thinker import Extractor
from extract_thinker.document_loader import DocumentLoaderPyPdf  # æˆ–ä»»ä½•å…¶ä»–åˆé€‚çš„ DocumentLoader

## åˆå§‹åŒ–æå–å™¨
extractor = Extractor()

## åŠ è½½ DocumentLoader
extractor.load_document_loader(DocumentLoaderPyPdf())

## åŠ è½½ LLM
extractor.load_llm('gpt-4o-mini')  # ä½¿ç”¨é€‚åˆæ‚¨ç”¨ä¾‹çš„æ¨¡å‹

## å®šä¹‰æ–‡æ¡£çš„è·¯å¾„
test_file_path = 'path/to/your/invoice.pdf'

## æ‰§è¡Œæå–
result = extractor.extract(test_file_path, InvoiceContract)

## è®¿é—®æå–çš„æ•°æ®
print("å‘ç¥¨å·ç :", result.invoice_number)
print("å‘ç¥¨æ—¥æœŸ:", result.invoice_date)
print("æ€»é‡‘é¢:", result.total_amount)
for item in result.line_items:
    print(f"é¡¹ç›®: {item.description}, æ•°é‡: {item.quantity}, å•ä»·: {item.unit_price}, é‡‘é¢: {item.amount}")
```

### ä»å›¾è¡¨ä¸­æå–æ•°æ®

ä»å›¾è¡¨ä¸­æå–æ•°æ®éœ€è¦ä¸€ä¸ªæ›´é«˜çº§çš„åˆåŒï¼Œä»¥å¤„ç†å›¾è¡¨çš„ç»“æ„ï¼ŒåŒ…æ‹¬å…¶ç±»å‹ã€æè¿°å’Œæ•°æ®ç‚¹ã€‚

**ä¸ºå›¾è¡¨å®šä¹‰åˆåŒ**


```python
from extract_thinker import Contract
from pydantic import Field
from typing import List, Literal

class XYCoordinate(Contract):
    x: float = Field(description='Value on the x-axis')
    y: float = Field(description='Value on the y-axis')

class Chart(Contract):
    classification: Literal['line', 'bar', 'pie'] = Field(description='Type of the chart')
    description: str = Field(description='Description of the chart')
    coordinates: List[XYCoordinate] = Field(description='Data points in the chart')
    gdp_variation: str = Field(description='Description of the GDP variation')

class ChartWithContent(Contract):
    content: str = Field(description='Content of the page without the chart')
    chart: Chart = Field(description='Extracted chart data')
```
è¿™ä¸ªåˆåŒå…è®¸æˆ‘ä»¬æå–ä¸ä»…æ˜¯æ–‡æœ¬å†…å®¹ï¼Œè¿˜æœ‰å›¾è¡¨çš„è¯¦ç»†ä¿¡æ¯ï¼ŒåŒ…æ‹¬å…¶æ•°æ®ç‚¹ã€‚

**æå–å›¾è¡¨æ•°æ®**


```python
import os
from extract_thinker import Extractor
from extract_thinker.document_loader import DocumentLoaderTesseract  # If working with images

## Initialize the Extractor
extractor = Extractor()

## Load the DocumentLoader
tesseract_path = os.getenv('TESSERACT_PATH')
if not tesseract_path:
    raise ValueError('TESSERACT_PATH environment variable is not set')
extractor.load_document_loader(DocumentLoaderTesseract(tesseract_path))

## Load the LLM (use O1 or GPT-4o for complex tasks)
extractor.load_llm("o1-preview")  # Use 'o1' for advanced reasoning

## Define the path to your document
test_file_path = 'path/to/your/document_with_chart.png'

## Perform the extraction
result = extractor.extract(test_file_path, ChartWithContent, vision=True)

## Access the extracted data
print("Content without Chart:", result.content)
print("Chart Type:", result.chart.classification)
print("Chart Description:", result.chart.description)
print("GDP Variation:", result.chart.gdp_variation)
print("Data Points:")
for coord in result.chart.coordinates:
    print(f"X: {coord.x}, Y: {coord.y}")
```
**æ³¨æ„**ï¼šé€‰æ‹©æ¨¡å‹æ—¶è¯·è®°ä½ç»éªŒæ³•åˆ™ã€‚å¦‚æœéœ€è¦æ ¹æ®æ•°æ®å¾—å‡ºç»“è®ºï¼Œä¾‹å¦‚è®¡ç®—GDPï¼Œåˆ™å¿…é¡»ä½¿ç”¨**o1æ¨¡å‹ã€‚**

## è¿‡ç¨‹ï¼šæ‹†åˆ†ä¸åˆ†ç±»

åœ¨ ExtractThinker ä¸­ï¼Œ**Process** ç»„ä»¶ä»£è¡¨ä¸€ä¸ªå·¥ä½œæµï¼Œè´Ÿè´£åè°ƒä»æ–‡æ¡£ä¸­åŠ è½½ã€æ‹†åˆ†ã€åˆ†ç±»å’Œæå–æ•°æ®ã€‚è¿™ä¸ªæ¨¡å—åŒ–çš„æ–¹æ³•ä½¿æ‚¨èƒ½å¤Ÿé«˜æ•ˆåœ°å¤„ç†å¤æ‚çš„æ–‡æ¡£å¤„ç†ä»»åŠ¡ã€‚

![](https://wsrv.nl/?url=https://cdn-images-1.readmedium.com/v2/resize:fit:800/1*U6eFz89-NNO9sAWGwx6Z1w.png)

### ç†è§£æµç¨‹

* **ç›®çš„**ï¼šç®¡ç†æ–‡æ¡£ä¸Šçš„ä¸€ç³»åˆ—æ“ä½œï¼ŒåŒ…æ‹¬åŠ è½½ã€æ‹†åˆ†ã€åˆ†ç±»å’Œæå–ã€‚
* **ç»„ä»¶**ï¼šç»“åˆ **DocumentLoaders**ã€**Splitters**ã€**Classifications** å’Œ **Extractors** åˆ›å»ºçµæ´»çš„å¤„ç†ç®¡é“ã€‚
* **çµæ´»æ€§**ï¼šé€šè¿‡æ··åˆå’ŒåŒ¹é…ä¸åŒç»„ä»¶ï¼Œæ ¹æ®æ‚¨çš„ç‰¹å®šéœ€æ±‚è‡ªå®šä¹‰å·¥ä½œæµç¨‹ã€‚

### æ‹†åˆ†æ–‡æ¡£

åœ¨å¤„ç†å¤šé¡µæˆ–åˆå¹¶æ–‡æ¡£æ—¶ï¼Œå°†å…¶æ‹†åˆ†ä¸ºå•ç‹¬çš„éƒ¨åˆ†æˆ–é¡µé¢å¯¹äºå‡†ç¡®å¤„ç†è‡³å…³é‡è¦ã€‚ExtractThinker æä¾›äº†æœ‰æ•ˆå¤„ç†çš„æ‹†åˆ†ç­–ç•¥ã€‚

**ä¸»åŠ¨æ‹†åˆ†ï¼š** æ­¤ç­–ç•¥ä¸€æ¬¡æ€§å¤„ç†æ•´ä¸ªæ–‡æ¡£ï¼Œæå‰è¯†åˆ«æ‰€æœ‰æ‹†åˆ†ç‚¹ã€‚å®ƒæœ€é€‚åˆé€‚åˆæ¨¡å‹ä¸Šä¸‹æ–‡çª—å£çš„å°åˆ°ä¸­ç­‰å¤§å°çš„æ–‡æ¡£ï¼Œä¸ºè¾ƒå°çš„è¾“å…¥æä¾›æ›´ç®€å•çš„å®ç°å’Œæ›´å¿«çš„å¤„ç†é€Ÿåº¦ã€‚

**æ‡’æƒ°æ‹†åˆ†ï¼š** æ­¤æ–¹æ³•é€æ­¥å¤„ç†æ–‡æ¡£ï¼Œè¯„ä¼°è¾ƒå°çš„å—ä»¥ç¡®å®šæ‹†åˆ†ä½ç½®ã€‚å®ƒéå¸¸é€‚åˆè¶…å‡ºæ¨¡å‹ä¸Šä¸‹æ–‡çª—å£çš„å¤§å‹æ–‡æ¡£ï¼Œä½¿å…¶æˆä¸ºå¤„ç†å¤§é‡æ•°æ®çš„å¯æ‰©å±•å’Œé«˜æ•ˆçš„é€‰æ‹©ã€‚

### ä½¿ç”¨åˆ†å‰²å™¨

ExtractThinker æä¾›äº†ä¸åŒçš„åˆ†å‰²å™¨ï¼Œä¾‹å¦‚ `ImageSplitter` å’Œ `TextSplitter`ï¼Œç”¨äºå¤„ç†åˆ†å‰²é€»è¾‘ã€‚

**è®¾ç½®åˆ†å‰²å™¨**


```python
from extract_thinker import Process, SplittingStrategy
from extract_thinker.splitter import ImageSplitter
from extract_thinker.document_loader import DocumentLoaderTesseract

## åˆå§‹åŒ– Process
process = Process()

## åŠ è½½ DocumentLoader
tesseract_path = os.getenv('TESSERACT_PATH')
process.load_document_loader(DocumentLoaderTesseract(tesseract_path))

## ä½¿ç”¨æ‰€éœ€çš„æ¨¡å‹å’Œç­–ç•¥åŠ è½½åˆ†å‰²å™¨
process.load_splitter(
    ImageSplitter('gpt-4o', strategy=SplittingStrategy.EAGER)
)
```

### åˆ†ç±»

åˆ†ç±»æ˜¯æŒ‡è¯†åˆ«æ‚¨æ‰€å¤„ç†çš„æ–‡æ¡£æˆ–éƒ¨åˆ†çš„ç±»å‹ï¼Œä¾‹å¦‚å‘ç¥¨ã€åˆåŒæˆ–é©¾é©¶æ‰§ç…§ã€‚å½“ä¸åŒç±»å‹çš„æ–‡æ¡£éœ€è¦ä¸åŒçš„æå–é€»è¾‘æ—¶ï¼Œè¿™ä¸€ç‚¹è‡³å…³é‡è¦ã€‚

åˆ†ç±»æ˜¯é€šè¿‡ `Classification` ç±»å®šä¹‰çš„ï¼ŒæŒ‡å®šåç§°ã€æè¿°å’Œç›¸å…³çš„ `Contract` ä»¥åŠè¦ä½¿ç”¨çš„ `Extractor`ã€‚

**ä½¿ç”¨å¤šä¸ªæå–å™¨çš„åˆ†ç±»**


```python
from extract_thinker import Classification
from extract_thinker import Extractor

## Define your Contracts (as previously defined)
class InvoiceContract(Contract):
    invoice_number: str
    total_amount: float
    # ... other fields

class DriverLicenseContract(Contract):
    name: str
    license_number: str
    # ... other fields

## Initialize Extractors for each classification if needed
invoice_extractor = Extractor()
invoice_extractor.load_document_loader(DocumentLoaderPyPdf())
invoice_extractor.load_llm('gpt-4o-mini')

license_extractor = Extractor()
license_extractor.load_document_loader(DocumentLoaderTesseract(tesseract_path))
license_extractor.load_llm('gpt-4o-mini')

## Define Classifications
classifications = [
    Classification(
        name="Invoice",
        description="This is an invoice document",
        contract=InvoiceContract,
        extractor=invoice_extractor
    ),
    Classification(
        name="Driver License",
        description="This is a driver's license document",
        contract=DriverLicenseContract,
        extractor=license_extractor
    )
]

result = process.classify(
    test_file_path,
    classifications,
)
```

### é«˜çº§åˆ†ç±»ç­–ç•¥

ExtractThinker æ”¯æŒé«˜çº§åˆ†ç±»ç­–ç•¥ï¼Œä»¥æé«˜å‡†ç¡®æ€§å’Œå¯é æ€§ã€‚

**åˆ†ç±»ç­–ç•¥ï¼š**

* **å…±è¯†**ï¼šç»“åˆå¤šä¸ªåˆ†ç±»å™¨çš„ç»“æœä»¥è¾¾æˆå…±è¯†å†³ç­–ã€‚
* **é«˜é˜¶**ï¼šä½¿ç”¨é«˜é˜¶æ¨ç†ä»¥å®ç°æ›´å‡†ç¡®çš„åˆ†ç±»ã€‚
* **é˜ˆå€¼**ï¼šåº”ç”¨ç½®ä¿¡åº¦é˜ˆå€¼æ¥ç¡®å®šåˆ†ç±»çš„ç¡®å®šæ€§ã€‚

**é«˜çº§åˆ†ç±»**

```python
from extract_thinker import ClassificationStrategy

## Initialize multiple Extractors for classification
extractor1 = Extractor()
extractor1.load_document_loader(DocumentLoaderTesseract(tesseract_path))
extractor1.load_llm('gpt-4o')

extractor2 = Extractor()
extractor2.load_document_loader(DocumentLoaderPyPdf())
extractor2.load_llm('gpt-4o-mini')

## Add classifiers to the process
process.add_classify_extractor([[extractor1], [extractor2]])

## Perform classification with a strategy
result = process.classify(
    test_file_path,
    classifications,
    strategy=ClassificationStrategy.CONSENSUS,
    threshold=0.8
)

print("Document classified as:", result.name)
```

### ç»“åˆæ‹†åˆ†å’Œåˆ†ç±»çš„è¿‡ç¨‹

é€šè¿‡ç»“åˆæ‹†åˆ†å’Œåˆ†ç±»ï¼Œæ‚¨å¯ä»¥é«˜æ•ˆå¤„ç†åŒ…å«å¤šç§å†…å®¹ç±»å‹çš„å¤æ‚æ–‡æ¡£ã€‚

**å®Œæ•´çš„è¿‡ç¨‹å·¥ä½œæµ**


```python
## Initialize the Process and load components
process = Process()
process.load_document_loader(DocumentLoaderTesseract(tesseract_path))
process.load_splitter(
    ImageSplitter('gpt-4o', strategy=SplittingStrategy.EAGER)
)

## Process the document
test_file_path = 'path/to/your/multi_page_document.pdf'
split_content = process.load_file(test_file_path)\
    .split(classifications)\
    .extract()

## Access the extracted data
for content in split_content:
    if isinstance(content, InvoiceContract):
        print("Extracted Invoice:")
        print("Invoice Number:", content.invoice_number)
        print("Total Amount:", content.total_amount)
    elif isinstance(content, DriverLicenseContract):
        print("Extracted Driver License:")
        print("Name:", content.name)
        print("License Number:", content.license_number)
```
**è¯´æ˜**ï¼š

* **load\_file()**ï¼šåŠ è½½æ–‡æ¡£ã€‚
* **split()**ï¼šæ ¹æ®åˆ†ç±»æ‹†åˆ†æ–‡æ¡£ã€‚
* **extract()**ï¼šæ ¹æ®ä¸ºæ¯ä¸ªåˆ†ç±»éƒ¨åˆ†å®šä¹‰çš„ `Contract` æå–æ•°æ®ã€‚

## é‡è´Ÿè½½çš„å¼‚æ­¥æ‰¹å¤„ç†

ExtractThinker æä¾›äº†ä¸€ç§æ‰¹å¤„ç†åŠŸèƒ½ï¼Œåˆ©ç”¨å¼‚æ­¥æ‰§è¡Œæœ‰æ•ˆå¤„ç†é‡è´Ÿè½½ã€‚è¿™ä½¿æ‚¨èƒ½å¤Ÿåœ¨å“åº”æ—¶é—´ä¸æˆé—®é¢˜æ—¶ä»¥**æ›´ä½çš„ä»·æ ¼å¤„ç†æ–‡æ¡£ã€‚**

**ä½¿ç”¨æ‰¹è¯·æ±‚**


```python
...
## Setting the extractor as usual
path = 'path/to/your/document.pdf'
batch_job = extractor.extract_batch(
  path,
  InvoiceContract,
)

## can be "queued", "processing", "completed" or "failed"
status = await batch_job.get_status()

## await for the result 
result = await batch_job.get_result()
```
**è¯´æ˜**ï¼š

* **extract\_batch**ï¼šå¯åŠ¨æ‰¹é‡æå–è¿‡ç¨‹ã€‚
* **BatchJob**ï¼šè¡¨ç¤ºæ‰¹é‡ä½œä¸šï¼Œå…è®¸æ‚¨ç›‘æ§å…¶çŠ¶æ€å¹¶æ£€ç´¢ç»“æœã€‚
* **get\_status**ï¼šæ£€æŸ¥æ‰¹é‡ä½œä¸šçš„å½“å‰çŠ¶æ€ã€‚
* **get\_result**ï¼šä¸€æ—¦ä½œä¸šå®Œæˆï¼Œæ£€ç´¢ç»“æœã€‚

### å¤„ç†æ‰¹å¤„ç†ä½œä¸šçŠ¶æ€

æ‰¹å¤„ç†ä½œä¸šå¯ä»¥æœ‰å‡ ç§çŠ¶æ€ï¼š

* **queued**: ä½œä¸šåœ¨é˜Ÿåˆ—ä¸­ï¼Œç¨åå°†å¼€å§‹å¤„ç†ã€‚
* **processing**: ä½œä¸šæ­£åœ¨è¢«å¤„ç†ã€‚
* **completed**: ä½œä¸šå·²æˆåŠŸå®Œæˆå¤„ç†ã€‚
* **failed**: ä½œä¸šå¤„ç†å¤±è´¥ã€‚

**æ‰¹å¤„ç†ä¸€æ¬¡å¤„ç†ä¸€ä¸ªæ–‡ä»¶**ï¼Œå› æ­¤ç”±æ‚¨æ§åˆ¶æ‰¹æ¬¡çš„æ•°é‡ã€‚æ‰¹å¤„ç†ä½œä¸šç®¡ç†æ‰€æœ‰éœ€è¦ä¸º OpenAI API åˆ›å»ºçš„ JSONL æ–‡ä»¶ï¼Œä»¥åŠè¾“å‡ºæ–‡ä»¶ã€‚å®Œæˆåï¼Œæ— è®ºæˆåŠŸä¸å¦ï¼Œéƒ½ä¼šåˆ é™¤è¿™äº›æ–‡ä»¶ã€‚

æœ€åï¼Œå¦‚æœè¯·æ±‚æ—¶é—´ä¸æ˜¯ä¸€ä¸ªé™åˆ¶ï¼Œ**æ‚¨å¯ä»¥é€šè¿‡è¿™ä¸ª ExtractThinker åŠŸèƒ½è½»æ¾èŠ‚çœ 50% çš„æˆæœ¬**ã€‚

## ç»“è®º

åœ¨ä¸€ä¸ªæ•°æ®ä¸ºç‹çš„ä¸–ç•Œé‡Œï¼Œ**ExtractThinker** ä½¿æ‚¨èƒ½å¤Ÿé‡Šæ”¾æ–‡æ¡£çš„å…¨éƒ¨æ½œåŠ›ã€‚é€šè¿‡æ™ºèƒ½é€‰æ‹©æ¨¡å‹ï¼Œå¦‚ **GPT\-4o Mini** è¿›è¡Œå¿«é€Ÿæ–‡æœ¬æå–ï¼Œ**GPT\-4o** è¿›è¡Œé«˜çº§åˆ†ç±»ï¼Œä»¥åŠ **O1** è¿›è¡Œæ·±åº¦æ¨ç†ä»»åŠ¡ï¼Œæ‚¨å¯ä»¥æ ¹æ®éœ€è¦å®šåˆ¶å·¥ä½œæµç¨‹ï¼Œä»¥å®ç°æœ€å¤§æ•ˆç‡å’Œå‡†ç¡®æ€§ã€‚æˆ‘ä»¬æ¢è®¨äº†å¦‚ä½•é€‰æ‹©æ­£ç¡®çš„æ¨¡å‹ï¼Œä½¿ç”¨ **DocumentLoaders**ï¼Œåˆ©ç”¨ **Extractor** æå–ç»“æ„åŒ–æ•°æ®ï¼Œç®¡ç†å¤æ‚å·¥ä½œæµç¨‹çš„ **Processes**ï¼Œä»¥åŠä½¿ç”¨å¼‚æ­¥ **batch** å¤„ç†é‡è´Ÿè½½ã€‚

è¿™æ˜¯æˆ‘è·å¾— API ä¸­ O1 æ¨¡å‹è®¿é—®æƒé™ååˆ›å»ºçš„ä¸€ç¯‡æ–‡ç« ï¼Œè§£å†³äº†ä¸€äº›æ£˜æ‰‹çš„é—®é¢˜ï¼Œæ¯”å¦‚èšåˆå’Œè®¡ç®—éœ€è¦åœ¨å•ç‹¬ä»£ç†ä¸­å®Œæˆçš„æ•°æ®ã€‚

**å¦‚æœæ‚¨è§‰å¾—è¿™ç¯‡æ–‡ç« å¯¹æ‚¨æœ‰å¸®åŠ©ï¼Œè¯·è€ƒè™‘åœ¨ GitHub ä¸Šä¸º [ExtractThinker](https://github.com/enoch3712/ExtractThinker) ä»“åº“åŠ æ˜Ÿï¼** ğŸŒŸ

