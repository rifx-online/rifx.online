---
title: "æŒæ¡ CrewAIï¼šç¬¬ 1 ç«  - æ‚¨çš„ç¬¬ä¸€ä¸ªæ™ºèƒ½å·¥ä½œæµç¨‹"
meta_title: "æŒæ¡ CrewAIï¼šç¬¬ 1 ç«  - æ‚¨çš„ç¬¬ä¸€ä¸ªæ™ºèƒ½å·¥ä½œæµç¨‹"
description: "CrewAI æ˜¯ä¸€ä¸ªå¹³å°ï¼Œç”¨äºåˆ›å»ºå’Œç®¡ç† AI ä»£ç†å›¢é˜Ÿï¼Œæä¾›ä¼ä¸šçº§å’Œå¼€æºè§£å†³æ–¹æ¡ˆã€‚æœ¬æ–‡é‡ç‚¹ä»‹ç»å¼€æº CrewAIï¼Œè§£é‡Šäº†ä»£ç†çš„æ¦‚å¿µåŠå…¶å¦‚ä½•æ¨¡æ‹Ÿäººç±»è¡Œä¸ºã€‚CrewAI åŒ…å«å››ä¸ªä¸»è¦ç»„ä»¶ï¼šCrewã€AI Agentsã€Process å’Œ Tasksã€‚æ–‡ç« è¯¦ç»†ä»‹ç»äº†å¦‚ä½•å®‰è£…å’Œé…ç½® CrewAIï¼Œåˆ›å»ºé¡¹ç›®ç»“æ„ï¼Œå®šä¹‰ä»£ç†å’Œä»»åŠ¡ï¼Œä»¥åŠè¿è¡Œå›¢é˜Ÿã€‚æ­¤å¤–ï¼Œè¿˜ä»‹ç»äº†å¦‚ä½•é›†æˆ Ollama ä»¥ä½¿ç”¨å¼€æº LLMï¼Œå¹¶å±•ç¤ºäº†å¦‚ä½•åˆ›å»ºå’Œè¿è¡Œæ›´å¤æ‚çš„ä»»åŠ¡é˜Ÿåˆ—ã€‚é€šè¿‡è¿™äº›æ­¥éª¤ï¼Œå¼€å‘äººå‘˜å¯ä»¥æ„å»ºå’Œç®¡ç†èƒ½å¤Ÿåä½œå®Œæˆå¤æ‚ä»»åŠ¡çš„ AI ä»£ç†å›¢é˜Ÿã€‚"
date: 2024-12-12T01:14:38Z
image: "https://wsrv.nl/?url=https://cdn-images-1.readmedium.com/v2/resize:fit:800/1*NZJp8YSggSLwkxLIHgSwWg.png"
categories: ["Programming", "Generative AI", "Chatbots"]
author: "Rifx.Online"
tags: ["CrewAI", "agents", "tasks", "Ollama", "Toolkit"]
draft: False

---



### ä»£ç†å’Œä»»åŠ¡çš„åŸºç¡€



CrewAI æ˜¯ä¸€ä¸ªå¹³å°ï¼Œå…è®¸æˆ‘ä»¬åˆ›å»ºå’Œç®¡ç† AI ä»£ç†å›¢é˜Ÿã€‚å®ƒæä¾›ä¼ä¸šçº§å’Œå¼€æºè§£å†³æ–¹æ¡ˆã€‚åœ¨è¿™ç¯‡åšå®¢æ–‡ç« ä¸­ï¼Œæˆ‘ä»¬å°†æ·±å…¥æ¢è®¨å¼€æº CrewAIï¼Œå½“ç„¶ã€‚

é‚£ä¹ˆï¼Œä»£ç†åˆ°åº•æ˜¯ä»€ä¹ˆï¼Ÿ

ä»£ç†è¢«å»ºæ¨¡ä»¥æ¨¡æ‹Ÿäººç±»åœ¨è§£å†³é—®é¢˜ã€æ‰§è¡Œä»»åŠ¡å’Œäº’åŠ¨ä¸­çš„è¡Œä¸ºã€‚

![](https://wsrv.nl/?url=https://cdn-images-1.readmedium.com/v2/resize:fit:800/1*iZgPrd8cLUztBV_u2dO5Wg.png)

ä»£ç†åˆ©ç”¨å…¶èƒ½åŠ›ã€å…ˆéªŒçŸ¥è¯†å’Œè§‚å¯Ÿï¼Œæœ‰æ•ˆä½œç”¨äºå…¶ç¯å¢ƒä»¥å®ç°å…¶ç›®æ ‡ã€‚

CrewAI è¢«è®¾è®¡ä¸ºå¸®åŠ©å¼€å‘äººå‘˜åˆ›å»ºå’Œç®¡ç†èƒ½å¤Ÿåä½œå®Œæˆå¤æ‚ä»»åŠ¡çš„ AI ä»£ç†å›¢é˜Ÿã€‚

å› æ­¤ï¼Œå®ƒå¹¶ä¸æ˜¯ä¸€ä¸ªç¥å¥‡çš„ç©å…·ï¼›è€Œæ˜¯ä¸€ä¸ªç”¨äºæ§åˆ¶å’Œç®¡ç†ä»£ç†å›¢é˜Ÿçš„æŠ½è±¡ã€‚

![](https://wsrv.nl/?url=https://cdn-images-1.readmedium.com/v2/resize:fit:800/1*HRbqTYl-0OUSfvF-eGXBaw.png)

æ¡†æ¶ä¸­æœ‰ 4 ä¸ªä¸»è¦ç»„ä»¶ï¼š

* Crew: å¯ä»¥å°†â€œCrewâ€è§†ä¸ºç›‘ç£æ•´ä¸ªæ“ä½œçš„ç»ç†ã€‚
* AI Agents: è¿™äº›æ˜¯å…·æœ‰ç‹¬ç‰¹è§’è‰²çš„ä¸“é—¨å›¢é˜Ÿæˆå‘˜ã€‚ä»–ä»¬ä½¿ç”¨å·¥å…·æ¥å®Œæˆä»»åŠ¡ã€‚
* Process: è¿™æ˜¯å·¥ä½œæµç¨‹ï¼Œç±»ä¼¼äºåä½œè“å›¾ã€‚å®ƒå®šä¹‰äº†ä»£ç†å¦‚ä½•äº’åŠ¨ç­‰ã€‚
* Tasks: ä»£ç†å¿…é¡»å®Œæˆçš„åˆ†é…ã€‚

## å®‰è£…

* *\[å¯é€‰ \| ä»¥è·Ÿéšæ“ä½œ]* åˆ›å»ºä¸€ä¸ªæ–°æ–‡ä»¶å¤¹: *crewai\-demo*
* *\[å¯é€‰ \| ä»¥è·Ÿéšæ“ä½œ]* åˆ›å»ºä¸€ä¸ªæ–°ç¯å¢ƒ:


```python
python3 -m venv venv

source venv/bin/activate
```
* å®‰è£… CrewAI


```python
pip install crewai crewai-tools
```
* å¯åŠ¨ä¸€ä¸ª Crew é¡¹ç›® (*å¯é€‰*: æˆ‘ä½¿ç”¨äº† `myagents` ä½œä¸ºé¡¹ç›®åç§°)


```python
crewai create crew <project_name>
```
å®ƒä¼šæ„å»ºä¸€ä¸ªé¡¹ç›®æ¨¡æ¿ã€‚

![](https://wsrv.nl/?url=https://cdn-images-1.readmedium.com/v2/resize:fit:800/1*ESYfS-IT-sw1UAq-FYfh_g.png)

* å®ƒä¼šæç¤ºæˆ‘ä»¬é€‰æ‹©ä¸€ä¸ªæä¾›è€…ï¼ˆåœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œæˆ‘å°†ä½¿ç”¨ OpenAIï¼‰ã€‚

![](https://wsrv.nl/?url=https://cdn-images-1.readmedium.com/v2/resize:fit:800/1*DIzVrXWyBIkpDHaQ9yW0Mg.png)

* å®ƒè¿˜ä¼šè¦æ±‚æä¾›æ¨¡å‹å’Œ OpenAI å¯†é’¥ï¼ˆæˆ‘é€‰æ‹©äº† *gpt\-4o\-mini*ï¼‰ã€‚
* éšåï¼Œå®ƒåœ¨æ–‡ä»¶å¤¹ä¸­åˆ›å»ºäº†æ¨¡æ¿æ–‡ä»¶ã€‚

![](https://wsrv.nl/?url=https://cdn-images-1.readmedium.com/v2/resize:fit:800/1*Pb89fHiuGiGheZ17FAdRHQ.png)

## é¡¹ç›®ç»“æ„

è®©æˆ‘ä»¬ä»”ç»†çœ‹çœ‹åˆ›å»ºçš„æ–‡ä»¶ã€‚

### crew.py

è¿™æ˜¯æˆ‘ä»¬çš„CrewAIé¡¹ç›®çš„ä¸»è„šæœ¬ã€‚


```python
from crewai import Agent, Crew, Process, Task
from crewai.project import CrewBase, agent, crew, task

@CrewBase
class Myagents():
 """Myagents crew"""

 agents_config = 'config/agents.yaml'
 tasks_config = 'config/tasks.yaml'

 @agent
 def researcher(self) -> Agent:
  return Agent(
   config=self.agents_config['researcher'],
   verbose=True
  )

 @agent
 def reporting_analyst(self) -> Agent:
  return Agent(
   config=self.agents_config['reporting_analyst'],
   verbose=True
  )

 @task
 def research_task(self) -> Task:
  return Task(
   config=self.tasks_config['research_task'],
  )

 @task
 def reporting_task(self) -> Task:
  return Task(
   config=self.tasks_config['reporting_task'],
   output_file='report.md'
  )

 @crew
 def crew(self) -> Crew:
  """Creates the Myagents crew"""

  return Crew(
   agents=self.agents, 
   tasks=self.tasks,
   process=Process.sequential,
   verbose=True,
  )
```
`@CrewBase` è£…é¥°å™¨å°† `Myagents` æ ‡è®°ä¸º CrewAI å›¢é˜Ÿå®šä¹‰ã€‚


```python
@CrewBase
class Myagents():
```
å®ƒä¸ºå®šä¹‰ä»£ç†ã€ä»»åŠ¡å’Œå›¢é˜Ÿé€»è¾‘æä¾›äº†æ¡†æ¶ã€‚å°±åƒæˆ‘ä»¬å›¢é˜Ÿçš„ç»„è£…æ¨¡æ¿ã€‚

`@agent` è£…é¥°å™¨å®šä¹‰äº†å…·æœ‰é¢„å®šä¹‰é…ç½®çš„ç‰¹å®š AI ä»£ç†ã€‚


```python
@agent
 def researcher(self) -> Agent:
  return Agent(
   config=self.agents_config['researcher'],
   verbose=True
  )

 @agent
 def reporting_analyst(self) -> Agent:
  return Agent(
   config=self.agents_config['reporting_analyst'],
   verbose=True
  )
```
æ¯ä¸ªä»£ç†çš„è¡Œä¸ºç”±å…¶é…ç½®å†³å®šã€‚

`@task` è£…é¥°å™¨å®šä¹‰äº†ä»£ç†éœ€è¦å®Œæˆçš„ä»»åŠ¡ã€‚


```python
@task
 def research_task(self) -> Task:
  return Task(
   config=self.tasks_config['research_task'],
  )

 @task
 def reporting_task(self) -> Task:
  return Task(
   config=self.tasks_config['reporting_task'],
   output_file='report.md'
  )
```
ä»»åŠ¡å°±åƒå¾…åŠäº‹é¡¹åˆ—è¡¨ä¸­çš„é¡¹ç›®ï¼Œæ¯ä¸ªä»»åŠ¡éƒ½æœ‰æ˜ç¡®çš„æŒ‡ç¤ºï¼Œæœ‰æ—¶è¿˜éœ€è¦ä¸€ä¸ªé¢„æœŸçš„äº¤ä»˜æˆæœï¼Œå¦‚ `output_file='report.md'`

`@crew` è£…é¥°å™¨ç”¨äºå®šä¹‰é¡¹ç›®ä¸­çš„æ•´ä¸ªå›¢é˜Ÿã€‚


```python
@crew
 def crew(self) -> Crew:
  """Creates the Myagents crew"""
  # è¦äº†è§£å¦‚ä½•ä¸ºæ‚¨çš„å›¢é˜Ÿæ·»åŠ çŸ¥è¯†æºï¼Œè¯·å‚é˜…æ–‡æ¡£ï¼š
  # https://docs.crewai.com/concepts/knowledge#what-is-knowledge

  return Crew(
   agents=self.agents, # ç”± @agent è£…é¥°å™¨è‡ªåŠ¨åˆ›å»º
   tasks=self.tasks, # ç”± @task è£…é¥°å™¨è‡ªåŠ¨åˆ›å»º
   process=Process.sequential,
   verbose=True,
   # process=Process.hierarchical, # å¦‚æœæ‚¨æƒ³ä½¿ç”¨åˆ†å±‚å¤„ç†ï¼Œè¯·å‚é˜… https://docs.crewai.com/how-to/Hierarchical/
  )
```
`Crew` ç±»è¡¨ç¤ºæ•´ä¸ªå›¢é˜Ÿçš„ä»£ç†ååŒå·¥ä½œã€‚`process` å†³å®šäº†å›¢é˜Ÿçš„å·¥ä½œæ–¹å¼ã€‚åœ¨é¡ºåºå¤„ç†ä¸­ï¼Œä»»åŠ¡ä¾æ¬¡å®Œæˆã€‚

æ€»ç»“ï¼š

* æˆ‘ä»¬ä½¿ç”¨ `@agent` åˆ›å»ºå…·æœ‰ç‰¹å®šèƒ½åŠ›çš„è§’è‰²ï¼ˆå¦‚ `researcher` å’Œ `reporting_analyst`ï¼‰ã€‚è¿™äº›æ˜¯å·¥ä½œè€…ã€‚
* æˆ‘ä»¬ä½¿ç”¨ `@task` å®šä¹‰ä»£ç†éœ€è¦å®Œæˆçš„å·¥ä½œï¼ˆå¦‚ `research_task` å’Œ `reporting_task`ï¼‰ã€‚
* æˆ‘ä»¬å°†ä»£ç†å’Œä»»åŠ¡ç»„è£…æˆä¸€ä¸ªç§°ä¸º `crew` çš„å•ä¸€å•å…ƒï¼Œé€šè¿‡ `process` å®šä¹‰å®ƒä»¬å¦‚ä½•ååŒå·¥ä½œã€‚

### config/\*.yaml

YAML é…ç½®æ–‡ä»¶å®šä¹‰äº†æˆ‘ä»¬çš„ AI ä»£ç†çš„è§’è‰²ã€ç›®æ ‡å’Œä»»åŠ¡ã€‚

**agents.yaml**

æ­¤æ–‡ä»¶å®šä¹‰äº†é¡¹ç›®ä¸­æ¯ä¸ªä»£ç†çš„é…ç½®ã€‚æ¯ä¸ªä»£ç†éƒ½æœ‰ä¸€ä¸ªè§’è‰²ã€ç›®æ ‡å’ŒèƒŒæ™¯æ•…äº‹ã€‚

```python
researcher:
  role: >
    {topic} Senior Data Researcher
  goal: >
    Uncover cutting-edge developments in {topic}
  backstory: >
    You're a seasoned researcher with a knack for uncovering the latest
    developments in {topic}. Known for your ability to find the most relevant
    information and present it in a clear and concise manner.

reporting_analyst:
  role: >
    {topic} Reporting Analyst
  goal: >
    Create detailed reports based on {topic} data analysis and research findings
  backstory: >
    You're a meticulous analyst with a keen eye for detail. You're known for
    your ability to turn complex data into clear and concise reports, making
    it easy for others to understand and act on the information you provide.
```
* `role`: ä¸“ä¸šå¤´è¡”
* `goal`: ä¸»è¦ç›®æ ‡
* `backstory`: å®šä¹‰ä»£ç†ä¸ªæ€§å’Œæ–¹æ³•çš„å™è¿°èƒŒæ™¯ã€‚

æ­¤æ–‡ä»¶å°±åƒä¸ºè™šæ‹Ÿå›¢é˜Ÿæˆå‘˜åˆ†é… *ä¸ªæ€§* å’Œ *èŒè´£* ä¸€æ ·ã€‚`researcher` æ˜¯ *ä¾¦æ¢*ï¼Œè´Ÿè´£å¯»æ‰¾ä¿¡æ¯çš„éšè—ç‘°å®ï¼Œè€Œ `reporting_analyst` æ˜¯ *è®²æ•…äº‹çš„äºº*ï¼Œå°†å‘ç°ç»„ç»‡æˆè¿è´¯çš„å™è¿°ã€‚

**tasks.yaml**

æ­¤æ–‡ä»¶å®šä¹‰äº†ä»£ç†éœ€è¦æ‰§è¡Œçš„ä»»åŠ¡ã€‚æ¯ä¸ªä»»åŠ¡åŒ…æ‹¬æè¿°ã€é¢„æœŸè¾“å‡ºå’Œè´Ÿè´£è¯¥ä»»åŠ¡çš„ä»£ç†ã€‚

```python
research_task:
  description: >
    Conduct a thorough research about {topic}
    Make sure you find any interesting and relevant information given
    the current year is 2024.
  expected_output: >
    A list with 10 bullet points of the most relevant information about {topic}
  agent: researcher

reporting_task:
  description: >
    Review the context you got and expand each topic into a full section for a report.
    Make sure the report is detailed and contains any and all relevant information.
  expected_output: >
    A fully fledge reports with the mains topics, each with a full section of information.
    Formatted as markdown without '```'
  agent: reporting_analyst
```
* `description`: ä»»åŠ¡çš„è¯¦ç»†è¯´æ˜ã€‚
* `expected_output`: é¢„æœŸçš„ç‰¹å®šæ ¼å¼æˆ–è¾“å‡ºç±»å‹
* `agent`: è´Ÿè´£å®Œæˆä»»åŠ¡çš„ä»£ç†ã€‚

ä»»åŠ¡ä»£è¡¨äº†éœ€è¦å®Œæˆçš„å·¥ä½œå’Œè°å°†å®Œæˆè¿™äº›å·¥ä½œã€‚

`research_task` åƒæ˜¯åˆ›å»ºé¡¹ç›®çš„åŸºçŸ³ï¼Œæ”¶é›†åŸå§‹ä½†å…³é”®çš„æ•°æ®ã€‚

`reporting_task` å°†è¿™äº›åŸºçŸ³ç²¾ç‚¼æˆä¸€ä¸ªç²¾è‡´ä¸”å¯æ“ä½œçš„æ–‡æ¡£ã€‚

### main.py

è¿™æ˜¯è¿è¡Œå’Œä¸æˆ‘ä»¬çš„å›¢é˜Ÿäº’åŠ¨çš„å…¥å£ç‚¹ã€‚

```python
import sys
import warnings

from myagents.crew import Myagents

warnings.filterwarnings("ignore", category=SyntaxWarning, module="pysbd")

def run():
    """
    Run the crew.
    """
    inputs = {
        'topic': 'AI LLMs'
    }
    Myagents().crew().kickoff(inputs=inputs)


def train():
    """
    Train the crew for a given number of iterations.
    """
    inputs = {
        "topic": "AI LLMs"
    }
    try:
        Myagents().crew().train(n_iterations=int(sys.argv[1]), filename=sys.argv[2], inputs=inputs)

    except Exception as e:
        raise Exception(f"An error occurred while training the crew: {e}")

def replay():
    """
    Replay the crew execution from a specific task.
    """
    try:
        Myagents().crew().replay(task_id=sys.argv[1])

    except Exception as e:
        raise Exception(f"An error occurred while replaying the crew: {e}")

def test():
    """
    Test the crew execution and returns the results.
    """
    inputs = {
        "topic": "AI LLMs"
    }
    try:
        Myagents().crew().test(n_iterations=int(sys.argv[1]), openai_model_name=sys.argv[2], inputs=inputs)

    except Exception as e:
        raise Exception(f"An error occurred while replaying the crew: {e}")
```
* `run` ä»¥é¢„å®šä¹‰çš„è¾“å…¥å¯åŠ¨å›¢é˜Ÿã€‚è¾“å…¥ `topic: "AI LLMs"` ä¼ é€’ç»™ä»£ç†ï¼ˆè®°å¾— YAML æ–‡ä»¶ä¸­çš„å†…å®¹ï¼‰ã€‚

```python
researcher:
  role: >
    {topic} Senior Data Researcher
```
* `train` è¿è¡Œä¸€ä¸ªè®­ç»ƒå¾ªç¯ï¼Œä»¥æé«˜å›¢é˜Ÿåœ¨å¤šæ¬¡è¿­ä»£ä¸­çš„è¡¨ç°ã€‚
* `replay` ä»ç‰¹å®šä»»åŠ¡é‡æ–°æ‰§è¡Œå›¢é˜Ÿã€‚
* `test` æµ‹è¯•å›¢é˜Ÿçš„æ‰§è¡Œå¹¶è¿”å›ç»“æœä»¥è¿›è¡Œè¯„ä¼°ã€‚

## è¿è¡Œå›¢é˜Ÿ

æˆ‘ä»¬å¯ä»¥ä½¿ç”¨ `crewai` CLI å‘½ä»¤æ¥è¿è¡Œå›¢é˜Ÿï¼Œæˆ–è€…ä½¿ç”¨ Python CLI æ‰‹åŠ¨è¿è¡Œé¡¹ç›®ã€‚

### crewai CLI

* è¿›å…¥ `crewai` é¡¹ç›®ï¼ˆåœ¨æˆ‘çš„æƒ…å†µä¸‹æ˜¯ *myagents*ï¼‰


```python
cd myagents
```
* å®‰è£… `crewai`ã€‚å®ƒå°†åˆ›å»ºä¸€ä¸ªæ–°çš„è™šæ‹Ÿç¯å¢ƒç­‰ã€‚


```python
crewai install
```
* è¿è¡Œå›¢é˜Ÿã€‚


```python
crewai run
```
![](https://wsrv.nl/?url=https://cdn-images-1.readmedium.com/v2/resize:fit:800/1*7AQnOhu_hASwtLu7VmUrsw.png)

é¦–å…ˆï¼Œå®ƒè¿è¡Œ â€œSenior Data Researcherâ€ã€‚ç„¶åï¼Œè¿è¡Œ â€œReporting Analystâ€ã€‚

![](https://wsrv.nl/?url=https://cdn-images-1.readmedium.com/v2/resize:fit:800/1*zYezD11vfXN45BCwOLJfoQ.png)

æœ€åï¼Œå®ƒåˆ›å»ºäº†æˆ‘ä»¬æƒ³è¦çš„ `report.md`ã€‚

![](https://wsrv.nl/?url=https://cdn-images-1.readmedium.com/v2/resize:fit:800/1*H5q26a1VKPJmqQiz05d7xg.png)

### Python CLI

æ‰‹åŠ¨è¿è¡Œï¼š

* æ›´æ–° `main.py` ä¸­çš„æ¨¡å—å¯¼å…¥


```python
#from myagents.crew import Myagents
from crew import Myagents
```
* åœ¨ `crew.py` ä¸­åŠ è½½ç¯å¢ƒå˜é‡


```python
from crewai import Agent, Crew, Process, Task
from crewai.project import CrewBase, agent, crew, task


from dotenv import load_dotenv

load_dotenv()
```
* æ›´æ–° `main.py`


```python
#!/usr/bin/env python
import sys
import warnings

#from myagents.crew import Myagents
from crew import Myagents

warnings.filterwarnings("ignore", category=SyntaxWarning, module="pysbd")


def run():
    """
    Run the crew.
    """
    inputs = {
        'topic': 'AI LLMs'
    }
    Myagents().crew().kickoff(inputs=inputs)

run()
```
* è¿è¡Œ CLI å‘½ä»¤


```python
python myagents/src/myagents/main.py  
```

## Ollama é›†æˆ

åˆ°ç›®å‰ä¸ºæ­¢ï¼Œæˆ‘ä»¬ä¸€ç›´ä½¿ç”¨ `gpt-4o-mini` ä½œä¸º LLMã€‚åœ¨ CrewAI ä¸­å¯ä»¥ä½¿ç”¨å¼€æº LLMï¼Œå¹¶ä¸”è¿™äº›æ¨¡å‹å¯ä»¥ä½¿ç”¨ Ollama é›†æˆã€‚

è®©æˆ‘ä»¬ä½¿ç”¨ `llama3.2:1b`


```python
ollama run llama3.2:1b
```
è¦åœ¨ Ollama API ä¸Šè¿è¡Œæ¨¡å‹ï¼Œæˆ‘ä»¬éœ€è¦æ›´æ–° `crew.py`

`from crewai import LLM` æ·»åŠ äº†å®šä¹‰å’Œé›†æˆ LLM çš„èƒ½åŠ›ã€‚


```python
from crewai import Agent, Crew, Process, Task, LLM # import LLM

@CrewBase
class Myagents():
 
 agents_config = 'config/agents.yaml'
 tasks_config = 'config/tasks.yaml'

  # Define a new LLM 
 ollama_llm = LLM(
  model="ollama/llama3.2:1b", # the model name
  base_url="http://localhost:11434", # the ollama endpoint
 )
```
ç„¶åæˆ‘ä»¬æ›´æ–°æ¯ä¸ªä»£ç†ä½¿ç”¨çš„ LLMã€‚


```python
@agent
 def researcher(self) -> Agent:
  return Agent(
   config=self.agents_config['researcher'],
   verbose=True,
   llm=self.ollama_llm # You can pass the LLM to the agent
  )

 @agent
 def reporting_analyst(self) -> Agent:
  return Agent(
   config=self.agents_config['reporting_analyst'],
   verbose=True,
   llm=self.ollama_llm # You can pass the LLM to the agent
  )
```
æ–°çš„ `crew.py`


```python
from crewai import Agent, Crew, Process, Task, LLM
from crewai.project import CrewBase, agent, crew, task
from dotenv import load_dotenv

load_dotenv()

@CrewBase
class Myagents():

 agents_config = 'config/agents.yaml'
 tasks_config = 'config/tasks.yaml'

 ollama_llm = LLM(
  model="ollama/llama3.2:1b",
  base_url="http://localhost:11434",
 )

 @agent
 def researcher(self) -> Agent:
  return Agent(
   config=self.agents_config['researcher'],
   verbose=True,
   llm=self.ollama_llm # You can pass the LLM to the agent
  )

 @agent
 def reporting_analyst(self) -> Agent:
  return Agent(
   config=self.agents_config['reporting_analyst'],
   verbose=True,
   llm=self.ollama_llm # You can pass the LLM to the agent
  )

 @task
 def research_task(self) -> Task:
  return Task(
   config=self.tasks_config['research_task'],
  )

 @task
 def reporting_task(self) -> Task:
  return Task(
   config=self.tasks_config['reporting_task'],
   output_file='report.md'
  )

 @crew
 def crew(self) -> Crew:
  """Creates the Myagents crew"""


  return Crew(
   agents=self.agents,
   tasks=self.tasks,
   process=Process.sequential,
   verbose=True,
  )
```
å†æ¬¡è¿è¡Œå›¢é˜Ÿã€‚


```python
crewai run
```

## ä»»åŠ¡

CrewAI ä¸­çš„ä»»åŠ¡æ˜¯åˆ†é…ç»™ AI ä»£ç†çš„å…·ä½“ä»»åŠ¡ã€‚å®ƒå°è£…äº†ä»£ç†å¿…é¡»æ‰§è¡Œçš„å…·ä½“æ“ä½œã€‚

ä»»åŠ¡å¯ä»¥éµå¾ªä¸¤ç§ä¸»è¦çš„å·¥ä½œæµç¨‹ï¼š

* **é¡ºåº**ï¼šä»»åŠ¡æŒ‰å®šä¹‰çš„é¡ºåºä¾æ¬¡æ‰§è¡Œã€‚`task1` -> `task2` -> `task3`
* **å±‚æ¬¡**ï¼šä»»åŠ¡æ ¹æ®ä»£ç†çš„è§’è‰²å’Œä¸“é•¿åŠ¨æ€åˆ†é…ã€‚`task1` å¯ä»¥æ‹†åˆ†ä¸ºå­ä»»åŠ¡ `subtask1`ã€`subtask2`ã€‚

è®¾ç½®æ‰§è¡Œæµç¨‹çš„åŸºæœ¬æ¥å£ï¼š

```python
crew = Crew(
    agents=[agent1, agent2],  # Define the agents
    tasks=[task1, task2],    # Define the tasks
    process=Process.sequential  # or Process.hierarchical
)
```
ä»»åŠ¡å¯ä»¥ä½¿ç”¨å…¶è®¸å¤šå±æ€§è¿›è¡Œè‡ªå®šä¹‰ã€‚

![](https://wsrv.nl/?url=https://cdn-images-1.readmedium.com/v2/resize:fit:800/1*uunEfMrm6pwbuW9gaqs-gw.png)

é€šè¿‡è‡ªå®šä¹‰è¿™äº›å±æ€§ï¼Œæˆ‘ä»¬å¯ä»¥è®¾è®¡ç¬¦åˆé¡¹ç›®éœ€æ±‚çš„ä»»åŠ¡ã€‚

## å·¥å…·

å·¥å…·æ˜¯ä½¿ AI ä»£ç†èƒ½å¤Ÿæ‰§è¡Œå¹¿æ³›ä»»åŠ¡çš„æ„å»ºå—ã€‚è¿™äº›å·¥å…·å¯ä»¥æ˜¯ä» APIã€LLM æˆ–æ•°æ®åº“è¿æ¥å™¨åˆ°è‡ªå®šä¹‰æ„å»ºçš„é€»è¾‘ã€‚

è™½ç„¶æˆ‘ä»¬å¯ä»¥åˆ›å»ºè‡ªå·±çš„è‡ªå®šä¹‰å·¥å…·ï¼Œä½† CrewAI åŒ…æ‹¬ä¸€ä¸ªé¢„è®¾çš„å·¥å…·åŒ…ï¼Œç§°ä¸º CrewAI å·¥å…·åŒ…ï¼Œå¹¶ä¸”è¿˜æ”¯æŒ LangChain å·¥å…·åŒ…ã€‚

![](https://wsrv.nl/?url=https://cdn-images-1.readmedium.com/v2/resize:fit:800/1*ftYg5qbvlWcvXb_ue14NaQ.png)

ä¸ºäº†æ›´å¥½åœ°ç†è§£ä»»åŠ¡å’Œå·¥å…·ï¼Œè®©æˆ‘ä»¬åˆ›å»ºä¸€ä¸ªæ–°çš„ CrewAI é¡¹ç›®ï¼ˆæˆ‘å°†å…¶å‘½åä¸º *crew-tasks*ï¼Œä½¿ç”¨ *gpt-4o-mini*ï¼‰ã€‚

æˆ‘ä»¬å°†æœ‰å››ä¸ªä»£ç†ï¼š`searcher`ã€`scrapper`ã€`copywriter` å’Œ `file_writer`ã€‚

* `searcher` å°†åœ¨äº’è”ç½‘ä¸Šæœç´¢ç‰¹å®šä¸»é¢˜ã€‚
* `scrapper` å°†æŠ“å– `searcher` è¿”å›çš„ç½‘ç«™ã€‚
* `copywriter` ä»ç½‘ç«™æ•°æ®ç”Ÿæˆæœ‰æ„ä¹‰çš„æ–‡æœ¬ã€‚
* `file_writer` å°†è¾“å‡ºå†™å…¥æ–‡ä»¶ã€‚

æˆ‘ä»¬å°†ä½¿ç”¨ `crewai_tools` ä¸­çš„é¢„å®šä¹‰å·¥å…·ã€‚

```python
from crewai_tools import SerperDevTool, ScrapeWebsiteTool, FileWriterTool
```

@CrewBase
class CrewTasks():
 """CrewTasks æœºç»„ä»»åŠ¡"""

 agents_config = 'config/agents.yaml'
 tasks_config = 'config/tasks.yaml'

 @agent
 def searcher(self) -> Agent:
  return Agent(
   config=self.agents_config['searcher'],
   verbose=True,
   tools=[SerperDevTool()],
  )

 @agent
 def scrapper(self) -> Agent:
  return Agent(
   config=self.agents_config['scrapper'],
   verbose=True,
   tools=[ScrapeWebsiteTool()],
  )
 
 @agent
 def copywriter(self) -> Agent:
  return Agent(
   config=self.agents_config['copywriter'],
   verbose=True,
  )
 
 @agent
 def file_writer(self) -> Agent:
  return Agent(
   config=self.agents_config['file_writer'],
   verbose=True,
   tools=[FileWriterTool()],
  )

@task
 def search_task(self) -> Task:
  return Task(
   config=self.tasks_config['search_task'],
  )
 
 @task
 def scrape_task(self) -> Task:
  return Task(
   config=self.tasks_config['scrape_task'],
  )

 
 @task
 def content_write_task(self) -> Task:
  return Task(
   config=self.tasks_config['content_write_task'],
  )
 
 @task
 def file_write_task(self) -> Task:
  return Task(
   config=self.tasks_config['file_write_task'],
  )

 @crew
 def crew(self) -> Crew:
  """åˆ›å»º CrewTasks æœºç»„"""
 
  return Crew(
   agents=self.agents, 
   tasks=self.tasks, 
   process=Process.sequential,
   verbose=True,
  
  )
```
æ¯ä¸ªä»£ç†éƒ½æœ‰ä¸€ä¸ªç‰¹å®šçš„ä»»åŠ¡ï¼š`search_task`ã€`scrap_task`ã€`content_write_task` å’Œ `file_write_task`ã€‚

ç›¸åº”åœ°ï¼Œæˆ‘ä»¬åº”è¯¥æ›´æ–° YAML æ–‡ä»¶ã€‚

**agents.yaml**


```python
searcher:
  role: >
    {topic} å†…å®¹æœç´¢è€…
  goal: >
    å‘ç° {topic} é¢†åŸŸçš„æœ€æ–°è¿›å±•
  backstory: >
    ä½ æ˜¯ä¸€ä½ç»éªŒä¸°å¯Œçš„ç ”ç©¶äººå‘˜ï¼Œæ“…é•¿å‘ç° {topic} é¢†åŸŸçš„æœ€æ–°è¿›å±•ã€‚ä»¥èƒ½å¤Ÿæ‰¾åˆ°æœ€ç›¸å…³çš„ä¿¡æ¯å¹¶ä»¥æ¸…æ™°ç®€æ´çš„æ–¹å¼å‘ˆç°è€Œé—»åã€‚

scrapper:
  role: >
    ç½‘ç«™æŠ“å–è€…
  goal: >
    æŠ“å–ç½‘ç«™ä¸Šçš„æœ€æ–° {topic} å†…å®¹
  backstory: >
    ä½ æ˜¯ä¸€ä½ç†Ÿç»ƒçš„ç½‘ç«™æŠ“å–è€…ï¼Œæ“…é•¿ä»ç½‘ç«™ä¸­æå–æœ€æœ‰ä»·å€¼çš„ä¿¡æ¯ã€‚ä»¥èƒ½å¤Ÿå¯¼èˆªå¤æ‚ç½‘ç«™å¹¶æå–æœ€ç›¸å…³ä¿¡æ¯è€Œé—»åã€‚

copywriter:
  role: >
    å†…å®¹æ’°ç¨¿äºº
  goal: >
    æ ¹æ®æä¾›çš„ä¿¡æ¯ç¼–å†™å¼•äººå…¥èƒœä¸”ä¿¡æ¯ä¸°å¯Œçš„å†…å®¹
  backstory: >
    ä½ æ˜¯ä¸€ä½æ‰åæ¨ªæº¢çš„æ’°ç¨¿äººï¼Œæ“…é•¿åˆ›ä½œå¼•äººå…¥èƒœä¸”ä¿¡æ¯ä¸°å¯Œçš„å†…å®¹ã€‚ä»¥èƒ½å¤Ÿå°†å¤æ‚ä¿¡æ¯ç®€åŒ–ä¸ºæ¸…æ™°ä¸”å¼•äººå…¥èƒœçš„æ–‡å­—è€Œé—»åã€‚

file_writer:
  role: >
    æ–‡ä»¶æ’°å†™è€…
  goal: >
    å°†æå–çš„ä¿¡æ¯å†™å…¥æ–‡ä»¶
  backstory: >
    ä½ æ˜¯ä¸€ä½ç†Ÿç»ƒçš„æ’°ç¨¿äººï¼Œæ“…é•¿åˆ›å»ºæ¡ç†æ¸…æ™°ä¸”ä¿¡æ¯ä¸°å¯Œçš„æ–‡ä»¶ã€‚ä»¥èƒ½å¤Ÿä»¥æ¸…æ™°ç®€æ´çš„æ–¹å¼å‘ˆç°ä¿¡æ¯è€Œé—»åã€‚
```
**tasks.yaml**


```python
search_task:
  description: >
    å¯¹ {topic} è¿›è¡Œå½»åº•ç ”ç©¶
    ç¡®ä¿æ‰¾åˆ°ä»»ä½•æœ‰è¶£ä¸”ç›¸å…³çš„ä¿¡æ¯ï¼Œè€ƒè™‘åˆ°å½“å‰å¹´ä»½æ˜¯ 2024 å¹´ã€‚
  expected_output: >
    ä¸€ä»½åŒ…å« 10 ä¸ªè¦ç‚¹çš„å…³äº {topic} çš„æœ€ç›¸å…³ä¿¡æ¯åˆ—è¡¨
  agent: searcher

scrape_task:
  description: >
    æŠ“å–ç½‘ç»œä¸Šå…³äº {topic} çš„æœ€æ–°ä¿¡æ¯
    ç¡®ä¿æ‰¾åˆ°ä»»ä½•æœ‰è¶£ä¸”ç›¸å…³çš„ä¿¡æ¯ï¼Œè€ƒè™‘åˆ°å½“å‰å¹´ä»½æ˜¯ 2024 å¹´ã€‚
  expected_output: >
    æŠ“å–çš„ç½‘ç«™ï¼ŒåŒ…å«å…³äº {topic} çš„æ‰€æœ‰é‡è¦ä¿¡æ¯
  agent: scrapper

content_write_task:
  description: >
    ç¼–å†™å…³äº {topic} çš„åšå®¢æ–‡ç« 
    ç¡®ä¿åŒ…å«æ‰€æœ‰ç›¸å…³ä¿¡æ¯ï¼Œå¹¶ä½¿å…¶å¯¹è¯»è€…å…·æœ‰å¸å¼•åŠ›ã€‚
  expected_output: >
    ä¸€ç¯‡è‡³å°‘ 200 å­—çš„å…³äº {topic} çš„åšå®¢æ–‡ç« 
  agent: copywriter

file_write_task:
  description: >
    å°†æ–‡ç« å†™å…¥æ–‡ä»¶
  expected_output: >
    æ–‡ç« å†™å…¥ article.md æ–‡ä»¶
  agent: file_writer
```
æˆ‘ä»¬å¿«è¦å®Œæˆäº†ã€‚

æœ€åï¼Œæˆ‘ä»¬éœ€è¦ä¸€ä¸ª SERPER_API_KEYã€‚

å‰å¾€ï¼š[*serper.dev*](https://serper.dev/api-key)

å°†å…¶æ·»åŠ åˆ° *.env* æ–‡ä»¶ä¸­


```python
SERPER_API_KEY=your-api-key
```

```python

## main.py

import sys
import warnings
from datetime import datetime
from crew import CrewTasks

warnings.filterwarnings("ignore", category=SyntaxWarning, module="pysbd")

def run():
    """
    è¿è¡Œä»»åŠ¡é˜Ÿåˆ—ã€‚
    """
    inputs = {
        'topic': 'AI LLMs',
        "date": datetime.now().strftime('%Y-%m-%d'),
    }
    CrewTasks().crew().kickoff(inputs=inputs)

run()
```
å½“æˆ‘è¿è¡Œè¿™ä¸ªä»»åŠ¡é˜Ÿåˆ—æ—¶ï¼Œå®ƒæœªèƒ½æŠ“å–ç½‘ç«™ã€‚çœ‹æ¥æˆ‘ä½¿ç”¨çš„è¾ƒå°æ¨¡å‹ `gpt-4o-mini` æ— æ³•å¤„ç†è¿™æ ·çš„ä»»åŠ¡ã€‚æˆ‘å°†æ¨¡å‹æ›´æ–°ä¸º `gpt-4o`ï¼ˆé€šè¿‡ `.env` æ–‡ä»¶ï¼‰ï¼Œé‡æ–°è¿è¡Œ `main.py`ï¼Œè¿™æ¬¡æˆåŠŸäº†ã€‚

![](https://wsrv.nl/?url=https://cdn-images-1.readmedium.com/v2/resize:fit:800/1*yq8GsDG2SQeneyXFm1K-LA.png)

æˆ‘ä»¬å¯ä»¥æä¾›å¤šä¸ªè¾“å…¥å¹¶ä¸ºæ¯ä¸ªè¾“å…¥è¿è¡Œä»»åŠ¡ã€‚


```python
def run():
    """
    è¿è¡Œä»»åŠ¡é˜Ÿåˆ—ã€‚
    """
    # inputs = {
    #     'topic': 'AI LLMs',
    #     "date": datetime.now().strftime('%Y-%m-%d'),
    # }

    inputs_list = [
        {
            'topic': 'AI LLMs',
            "date": datetime.now().strftime('%Y-%m-%d'),
        },
        {
            'topic': 'Hugging Face',
            "date": datetime.now().strftime('%Y-%m-%d'),
        },
        {
            'topic': 'Ollama',
            "date": datetime.now().strftime('%Y-%m-%d'),
        },

    ]
    # CrewTasks().crew().kickoff(inputs=inputs)
    CrewTasks().crew().kickoff_for_each(inputs=inputs_list)
```
è¿™æ˜¯åˆ©ç”¨ CrewAI çš„ç¬¬ä¸€ç« ç»“æŸã€‚


### é˜…è¯»æ›´å¤š


### å‚è€ƒèµ„æ–™

[https://www.codiste.com/ai\-agents\-and\-agentic\-workflows](https://www.codiste.com/ai-agents-and-agentic-workflows)

<https://www.crewai.com/>

<https://docs.crewai.com/concepts/tasks>

<https://docs.crewai.com/concepts/tools>

[https://www.youtube.com/watch?v\=ONKOXwucLvE](https://www.youtube.com/watch?v=ONKOXwucLvE)


## ç”¨ç®€å•è‹±è¯­ ğŸš€

*æ„Ÿè°¢æ‚¨æˆä¸º [**In Plain English**](https://plainenglish.io/) ç¤¾åŒºçš„ä¸€å‘˜ï¼åœ¨æ‚¨ç¦»å¼€ä¹‹å‰ï¼š*

* è¯·åŠ¡å¿…**ç‚¹èµ**å¹¶**å…³æ³¨**ä½œè€… ï¸ğŸ‘**ï¸ï¸**
* å…³æ³¨æˆ‘ä»¬ï¼š[**X**](https://x.com/inPlainEngHQ) \| [**LinkedIn**](https://www.linkedin.com/company/inplainenglish/) \| [**YouTube**](https://www.youtube.com/channel/UCtipWUghju290NWcn8jhyAw) \| [**Discord**](https://discord.gg/in-plain-english-709094664682340443) \| [**Newsletter**](https://newsletter.plainenglish.io/) \| [**Podcast**](https://open.spotify.com/show/7qxylRWKhvZwMz2WuEoua0)
* [**åœ¨ Differ ä¸Šåˆ›å»ºä¸€ä¸ªå…è´¹çš„ AI é©±åŠ¨çš„åšå®¢ã€‚**](https://differ.blog/)
* æ›´å¤šå†…å®¹è¯·è®¿é—® [**PlainEnglish.io**](https://plainenglish.io/)

